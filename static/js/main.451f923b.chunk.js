(this["webpackJsonpentry-management"]=this["webpackJsonpentry-management"]||[]).push([[0],{248:function(e,t,a){e.exports=a(415)},253:function(e,t,a){},254:function(e,t,a){},415:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(59),i=a.n(l),o=(a(253),a(254),a(35)),s=a(36),m=a(37),c=a(38),u=a(25),h=a(432),g=a(424),d=a(436),p=a(51),E=a(428),f=a(16),b="https://registration-management.herokuapp.com/",v=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleLogout=n.handleLogout.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"handleLogout",value:function(e){var t=this;fetch(b+"logout").then((function(e){return e.json()})).then((function(e){t.props.onLoggingOut()})).catch((function(e){return console.log(e.message)}))}},{key:"render",value:function(){return"true"===this.props.isLoggedIn?r.a.createElement(h.a,{secondary:!0,pointing:!0,inverted:!0,size:"massive"},r.a.createElement(g.a,null,r.a.createElement(f.c,{to:"/registrationsCount",activeClassName:"active"},r.a.createElement(d.a,{as:h.a.Item,minWidth:790,name:"home"},r.a.createElement(p.a,{name:"chart bar"}),"Registrations Count")),r.a.createElement(f.c,{to:"/registrations",activeClassName:"active"},r.a.createElement(d.a,{as:h.a.Item,minWidth:790,name:"home"},r.a.createElement(p.a,{name:"list"}),"All Registrations")),r.a.createElement(h.a.Menu,{position:"right"},r.a.createElement(d.a,{as:h.a.Item,minWidth:790,name:"admin"},r.a.createElement(f.c,{to:"/home",onClick:this.handleLogout},r.a.createElement(p.a,{name:"sign out alternate"}),"  Logout"))),r.a.createElement(d.a,{as:h.a.Menu,maxWidth:789,position:"right"},r.a.createElement(E.a,{item:!0,icon:"bars"},r.a.createElement(E.a.Menu,null,r.a.createElement(f.c,{to:"/registrationsCount"},r.a.createElement(E.a.Item,{text:"Registaration Count",secondary:!0,className:"mobile-dropdown"})),r.a.createElement(f.c,{to:"/registrations"},r.a.createElement(E.a.Item,{text:"All registrations",secondary:!0,className:"mobile-dropdown"})),r.a.createElement(f.c,{to:"/home",onClick:this.handleLogout},r.a.createElement(E.a.Item,{text:"Logout",secondary:!0,className:"mobile-dropdown"}))))))):r.a.createElement(h.a,{secondary:!0,pointing:!0,inverted:!0,size:"massive"},r.a.createElement(g.a,null,r.a.createElement(f.c,{to:"/home",activeClassName:"active"},r.a.createElement(d.a,{as:h.a.Item,minWidth:790,name:"home"},r.a.createElement(p.a,{name:"home"}),"Home")),r.a.createElement(f.c,{to:"/register"},r.a.createElement(d.a,{as:h.a.Item,minWidth:790,name:"register"},r.a.createElement(p.a,{name:"signup"}),"Register for the event")),r.a.createElement(h.a.Menu,{position:"right"},r.a.createElement(f.c,{to:"/login"},r.a.createElement(d.a,{as:h.a.Item,minWidth:790,name:"admin"},"Are you an admin?"))),r.a.createElement(d.a,{as:h.a.Menu,maxWidth:789,position:"right"},r.a.createElement(E.a,{item:!0,icon:"bars"},r.a.createElement(E.a.Menu,null,r.a.createElement(f.c,{to:"/home"},r.a.createElement(E.a.Item,{text:"Home",secondary:!0,className:"mobile-dropdown"})),r.a.createElement(f.c,{to:"/register"},r.a.createElement(E.a.Item,{text:"Register",className:"mobile-dropdown",secondary:!0})),r.a.createElement(f.c,{to:"/login"},r.a.createElement(E.a.Item,{text:"Admin?",secondary:!0,className:"mobile-dropdown"})))))))}}]),a}(n.Component),y=a(433),C=a(434),w=a(431),I=function(){return r.a.createElement(g.a,{className:"home"},r.a.createElement(y.a,{as:"h1",content:"Welcome",inverted:!0}),r.a.createElement(y.a,{as:"h2",size:"large",inverted:!0,content:"Book Your Spot for Thurday's event!"}),r.a.createElement("p",null,"Don't miss out on our sixth annual event, the largest event of all the events."),r.a.createElement(C.a,{divided:!0},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{computer:1}),r.a.createElement(C.a.Column,{computer:4,mobile:16},r.a.createElement("div",{className:"feature-div"},r.a.createElement("img",{src:"https://raw.githubusercontent.com/atharvasharma/Registration-Management/master/public/images/woman.png",className:"man-image",alt:"featured"}),r.a.createElement("p",null,r.a.createElement("strong",null," Speaker 1")))),r.a.createElement(C.a.Column,{computer:1}),r.a.createElement(C.a.Column,{computer:4,mobile:16},r.a.createElement("img",{src:"https://raw.githubusercontent.com/atharvasharma/Registration-Management/master/public/images/man.png",className:"man-image",alt:"featured"}),r.a.createElement("p",null,r.a.createElement("strong",null," Speaker 2"))),r.a.createElement(C.a.Column,{computer:1}),r.a.createElement(C.a.Column,{computer:4,mobile:16},r.a.createElement("img",{src:"https://raw.githubusercontent.com/atharvasharma/Registration-Management/master/public/images/man2.png",className:"man-image",alt:"featured"}),r.a.createElement("p",null,r.a.createElement("strong",null," Speaker 3"))),r.a.createElement(C.a.Column,{computer:1}))),r.a.createElement("div",{className:"registerButton"},r.a.createElement(f.c,{to:"/register"},r.a.createElement(w.a,{color:"teal",size:"huge"},"Register Now ",r.a.createElement(p.a,{name:"arrow alternate circle right outline"})))))},O=a(60),N=a(226),L=a(425),k=a(426),j=function(e){return r.a.createElement(C.a,{celled:!0},r.a.createElement(C.a.Row,{className:"preview"},r.a.createElement(C.a.Column,{computer:6,mobile:16},r.a.createElement(y.a,{as:"h3",content:"Full Name: "}),r.a.createElement("span",null,e.fullName),r.a.createElement(y.a,{as:"h3",content:"Mobile:"}),r.a.createElement("span",null,e.mobile),r.a.createElement(y.a,{as:"h3",content:"Email:"}),r.a.createElement("span",null,e.email),r.a.createElement(y.a,{as:"h3",content:"Registration Type:"}),r.a.createElement("span",null,e.registrationType),r.a.createElement(y.a,{as:"h3",content:"Number of Tickets:"}),r.a.createElement("span",null,e.numberOfTickets)),r.a.createElement(C.a.Column,{computer:10,mobile:16},r.a.createElement(y.a,{as:"h3"},"Id image"),r.a.createElement("img",{src:URL.createObjectURL(e.id),alt:"id"}))))},T=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleBlur=function(e){return function(t){n.setState({touched:Object(N.a)({},n.state.touched,Object(O.a)({},e,!0))})}},n.state={fullName:"",mobile:"",email:"",registrationType:"self",numberOfTickets:"1",id:null,touched:{fullName:!1,mobile:!1,email:!1},previewOpen:!1},n.handleInputChange=n.handleInputChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.handleBlur=n.handleBlur.bind(Object(u.a)(n)),n.handleImage=n.handleImage.bind(Object(u.a)(n)),n.handleCancel=n.handleCancel.bind(Object(u.a)(n)),n.showPreview=n.showPreview.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"handleSubmit",value:function(e){var t=new FormData;t.append("fullName",this.state.fullName),t.append("mobile",this.state.mobile),t.append("email",this.state.email),t.append("registrationType",this.state.registrationType),t.append("numberOfTickets",this.state.numberOfTickets),t.append("id",this.state.id),fetch(b+"register",{method:"POST",body:t}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.errmsg);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return alert("You have been registered successfully. Your registration ID is: "+e._id)})).catch((function(e){"Conflict"===e.response.statusText?alert("Entry with this email already exists"):alert("We couldn't register you currently. Please try again later.")})),this.setState({previewOpen:!1}),e.preventDefault()}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(O.a)({},n,a))}},{key:"handleImage",value:function(e){this.setState({id:e.target.files[0]})}},{key:"showPreview",value:function(){0!==this.state.fullName.length&&0!==this.state.mobile.length&&0!==this.state.email.length&&null!==this.state.id?this.setState({previewOpen:!0}):alert("Please fill in all the details")}},{key:"handleCancel",value:function(){this.setState({previewOpen:!1})}},{key:"validate",value:function(e,t,a){var n={fullName:"",mobile:"",email:""};this.state.touched.fullName&&e.length<3&&(n.fullName="First Name should be of length >=3");this.state.touched.mobile&&!/^[789]\d{9}$/.test(t)&&10!==t.length&&(n.mobile="Mobile Number should only contain digits and length equal to 10");return this.state.touched.email&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a)&&(n.email="Enter a valid Email"),n}},{key:"render",value:function(){var e=this.validate(this.state.fullName,this.state.mobile,this.state.email);return r.a.createElement(g.a,{className:"register"},r.a.createElement(C.a,{divided:!0},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{computer:9,mobile:16},r.a.createElement(y.a,{as:"h2",content:"Please fill in the details below.",inverted:!0,size:"huge"}),r.a.createElement(L.a,{inverted:!0},r.a.createElement(L.a.Group,{widths:"equal"},r.a.createElement(L.a.Input,{fluid:!0,label:"Full name",placeholder:"Full name",type:"text",required:!0,name:"fullName",value:this.state.fullName,onChange:this.handleInputChange,onBlur:this.handleBlur("fullName"),error:e.fullName}),r.a.createElement(L.a.Input,{fluid:!0,label:"Mobile",placeholder:"Mobile",type:"tel",required:!0,name:"mobile",value:this.state.mobile,onChange:this.handleInputChange,onBlur:this.handleBlur("mobile"),error:e.mobile})),r.a.createElement(L.a.Input,{fluid:!0,label:"Email",placeholder:"Email",type:"email",required:!0,name:"email",value:this.state.email,onChange:this.handleInputChange,onBlur:this.handleBlur("email"),error:e.email}),r.a.createElement("label",{className:"typeLabel"},"Registration Type"),r.a.createElement("select",{name:"registrationType",value:this.state.registrationType,required:!0,onChange:this.handleInputChange},r.a.createElement("option",{value:"self"},"Self"),r.a.createElement("option",{value:"group"},"Group"),r.a.createElement("option",{value:"corporate"},"Corporate"),r.a.createElement("option",{value:"others"},"Others")),r.a.createElement(L.a.Input,{fluid:!0,label:"No of tickets",placeholder:"No of tickets",type:"number",min:"1",required:!0,name:"numberOfTickets",value:this.state.numberOfTickets,onChange:this.handleInputChange,disabled:"self"===this.state.registrationType}),r.a.createElement(L.a.Input,{fluid:!0,label:"Upload ID card",placeholder:"Upload ID card",type:"file",accept:"image/*",required:!0,onChange:this.handleImage}),r.a.createElement(L.a.Button,{onClick:this.showPreview},"Submit"),r.a.createElement(k.a,{open:this.state.previewOpen,content:r.a.createElement(j,{fullName:this.state.fullName,mobile:this.state.mobile,email:this.state.email,registrationType:this.state.registrationType,numberOfTickets:this.state.numberOfTickets,id:this.state.id}),onCancel:this.handleCancel,onConfirm:this.handleSubmit,header:"Are you sure you want to register with the following details?"}))),r.a.createElement(C.a.Column,{computer:2,mobile:16}),r.a.createElement(C.a.Column,{computer:5,mobile:16},r.a.createElement("img",{src:"https://raw.githubusercontent.com/atharvasharma/Registration-Management/master/public/images/register.png",alt:"register"})))))}}]),a}(n.Component),S=a(435),R=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={username:"",password:""},n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(u.a)(n)),n}return Object(s.a)(a,[{key:"handleSubmit",value:function(e){var t=this;this.props.onLogging("loading");var a={username:this.state.username,password:this.state.password};fetch(b+"login",{method:"POST",body:JSON.stringify(a),headers:{"Content-type":"application/json"}}).then((function(e){if(e.ok)return e;var t=new Error("Error "+e.status+": "+e.errmsg);throw t.response=e,t}),(function(e){throw e})).then((function(e){return e.json()})).then((function(e){return t.props.onLogging("true")})).catch((function(e){e.response.status,t.props.onLogging("false")}))}},{key:"handleInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(O.a)({},n,a))}},{key:"render",value:function(){return r.a.createElement(C.a,{textAlign:"center",style:{height:"80vh"},verticalAlign:"middle"},r.a.createElement(C.a.Column,{style:{maxWidth:450}},r.a.createElement(y.a,{as:"h2",inverted:!0,textAlign:"center"},"Log-in to your account"),r.a.createElement(L.a,{size:"large"},r.a.createElement(S.a,{stacked:!0},r.a.createElement(L.a.Input,{fluid:!0,icon:"user",name:"username",iconPosition:"left",placeholder:"Username",value:this.state.username,onChange:this.handleInputChange}),r.a.createElement(L.a.Input,{fluid:!0,icon:"lock",iconPosition:"left",placeholder:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleInputChange}),r.a.createElement(f.c,{to:"/registrationsCount",onClick:this.handleSubmit},r.a.createElement(w.a,{type:"submit",color:"teal",fluid:!0,size:"large"},"Login"))))))}}]),a}(n.Component),x=a(430),M=a(236),A=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){if("true"===this.props.isLoggedIn&&this.props.entries.length>0){for(var e=this.props.entries,t=0,a=0,n=0,l=0,i=0;i<e.length;i++)console.log(e[i]),"self"===e[i].registrationType?t++:"group"===e[i].registrationType?a++:"corporate"===e[i].registrationType?n++:"others"===e[i].registrationType&&l++;return console.log(t),console.log(a),console.log(n),console.log(l),r.a.createElement(g.a,{className:"registrationsCount"},r.a.createElement(y.a,{as:"h2",inverted:!0},"Hi admin!"),r.a.createElement(C.a,{divided:!0},r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{computer:3}),r.a.createElement(C.a.Column,{computer:10,mobile:16},r.a.createElement(y.a,{as:"h3",inverted:!0},"Following are the counts of registrations."),r.a.createElement(M.a,{backgroundColor:"none",height:400,chartType:"ColumnChart",data:[["Registration Type","Counts"],["Self",t],["Group",a],["Corporate",n],["Others",l]],options:{title:"Registration Counts",chartArea:{width:"65%"},hAxis:{title:"Registration Type",minValue:0},vAxis:{title:"Count"}},legendToggle:!0}))),r.a.createElement(C.a.Row,null,r.a.createElement(C.a.Column,{computer:16},r.a.createElement(f.c,{to:"/registrations"},r.a.createElement(w.a,{color:"teal"},"View all registrations"))))))}return"true"===this.props.isLoggedIn&&this.props.entriesLoading||"loading"===this.props.isLoggedIn?r.a.createElement(x.a,null,"Loading"):"false"===this.props.isLoggedIn?r.a.createElement(x.a,null,"You were not logged in! Please try again"):void 0}}]),a}(n.Component),P=a(429),B=function(e){return"true"===e.isLoggedIn?r.a.createElement(g.a,{className:"registrations"},r.a.createElement(y.a,{as:"h2",inverted:!0},"Here is the list all the Registrations"),r.a.createElement(S.a,{inverted:!0},r.a.createElement(P.a,{divided:!0,inverted:!0,relaxed:!0},e.entries.map((function(e){return r.a.createElement(P.a.Item,{key:e._id},r.a.createElement(f.b,{to:"/registrations/".concat(e._id)},r.a.createElement(P.a.Content,null,r.a.createElement("strong",null,"Registration id :")," ",e._id,"\xa0\xa0\xa0\xa0",r.a.createElement("strong",null,"Full Name : ")," ",e.fullName,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"Date Registered :")," ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}).format(new Date(e.createdAt)))))}))))):r.a.createElement(x.a,null,"Please log in and try again")},D=a(238),W=function(e){return"true"===e.isLoggedIn?r.a.createElement(g.a,{className:"registrationDetail"},r.a.createElement(y.a,{as:"h2",inverted:!0},"Following are the details of this entry."),r.a.createElement(C.a,null,r.a.createElement(C.a.Row,{className:"details"},r.a.createElement(C.a.Column,{computer:2,mobile:16}),r.a.createElement(C.a.Column,{computer:7,mobile:16},r.a.createElement(y.a,{as:"h3",inverted:!0},"Id Image :"),r.a.createElement(D.a,{src:b+e.entry.idImage})),r.a.createElement(C.a.Column,{computer:7,mobile:16,textAlign:"left"},r.a.createElement(y.a,{inverted:!0},"Name: ",e.entry.fullName),r.a.createElement(y.a,{inverted:!0},"Email: ",e.entry.email),r.a.createElement(y.a,{inverted:!0},"Mobile: ",e.entry.mobile),r.a.createElement(y.a,{inverted:!0},"Registration Type: ",e.entry.registrationType),r.a.createElement(y.a,{inverted:!0},"Number of Tickets: ",e.entry.numberOfTickets),r.a.createElement(y.a,{inverted:!0},"Registration id: ",e.entry._id),r.a.createElement(y.a,{inverted:!0},"Registration Date: ",new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}).format(new Date(e.entry.createdAt))))))):r.a.createElement(x.a,null,"Please log in and try again")},F=a(17),q=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={isLoggedIn:"false",entries:[],entriesLoading:!0},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;"true"===this.state.isLoggedIn&&"loading"===t.isLoggedIn&&fetch(b).then((function(e){return e.json()})).then((function(e){a.setState({entries:e,entriesLoading:!1}),console.log(a.state.entries)})).catch((function(e){return console.log(e.message)}))}},{key:"onLogIn",value:function(e){this.setState({isLoggedIn:e})}},{key:"onLogOut",value:function(){console.log("ran"),this.setState({isLoggedIn:"false"})}},{key:"render",value:function(){var e=this;console.log(this.state.isLoggedIn);return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{isLoggedIn:this.state.isLoggedIn,onLoggingOut:function(){return e.onLogOut()}}),r.a.createElement(F.d,null,r.a.createElement(F.b,{path:"/home",component:I}),r.a.createElement(F.b,{exact:!0,path:"/register",component:T}),r.a.createElement(F.b,{path:"/login",component:function(){return r.a.createElement(R,{onLogging:function(t){return e.onLogIn(t)}})}}),r.a.createElement(F.b,{path:"/registrationsCount",component:function(){return r.a.createElement(A,{isLoggedIn:e.state.isLoggedIn,entries:e.state.entries,entriesLoading:e.state.entriesLoading,loginLoading:e.state.loginLoading})}}),r.a.createElement(F.b,{exact:!0,path:"/registrations",component:function(){return r.a.createElement(B,{isLoggedIn:e.state.isLoggedIn,entries:e.state.entries})}}),r.a.createElement(F.b,{path:"/registrations/:registrationId",component:function(t){var a=t.match;return r.a.createElement(W,{entry:e.state.entries.filter((function(e){return e._id===a.params.registrationId}))[0],isLoggedIn:e.state.isLoggedIn})}}),r.a.createElement(F.a,{to:"/home"})))}}]),a}(n.Component);var U=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[248,1,2]]]);
//# sourceMappingURL=main.451f923b.chunk.js.map